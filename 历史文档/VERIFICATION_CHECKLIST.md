# 功能验证清单

> 版本: 2.0.0
> 更新日期: 2026-01-21

---

## 📋 验证说明

本清单用于验证所有已完成功能是否正常工作。建议在部署前完整执行一遍。

---

## 🚀 启动验证

### 1. 服务启动

- [ ] 运行 `start_all.bat` 启动所有服务
- [ ] 后端服务启动成功 (http://localhost:8000)
- [ ] 前端服务启动成功 (http://localhost:5173)
- [ ] API文档可访问 (http://localhost:8000/docs)
- [ ] 健康检查通过 (http://localhost:8000/health)

**验证方法**:
```bash
# 启动服务
start_all.bat

# 检查健康状态
curl http://localhost:8000/health
```

---

## 🔍 代理服务验证

### 2. 代理启动和停止

- [ ] 打开前端页面 (http://localhost:5173)
- [ ] 进入"代理抓包"页面
- [ ] 点击"启动代理"按钮
- [ ] 代理状态显示"运行中"
- [ ] 本机IP地址正确显示
- [ ] 代理端口显示正确（默认8888）
- [ ] 点击"停止代理"按钮
- [ ] 代理状态显示"已停止"

### 3. 防火墙状态检查

- [ ] 防火墙状态卡片显示
- [ ] 状态信息正确（启用/禁用）
- [ ] 点击"重新检查"按钮
- [ ] 状态更新正常

---

## 📡 实时推送验证

### 4. WebSocket连接

- [ ] 打开浏览器开发者工具 (F12)
- [ ] 切换到Network标签
- [ ] 筛选WS连接
- [ ] 看到 `/ws/proxy-events` 连接
- [ ] 连接状态为"已连接"

### 5. 实时数据推送

- [ ] 启动代理服务
- [ ] 在浏览器中访问任意网站（通过代理）
- [ ] 请求列表实时更新
- [ ] 无需刷新页面即可看到新请求
- [ ] 请求详情完整显示

**验证方法**:
```bash
# 配置浏览器代理为 localhost:8888
# 访问 http://example.com
# 观察前端请求列表是否实时更新
```

---

## 💾 数据导出验证

### 6. HAR格式导出

- [ ] 进入"请求列表"标签页
- [ ] 点击"导出"按钮
- [ ] 选择"HAR格式"
- [ ] 点击"导出"
- [ ] 文件成功下载
- [ ] 文件名格式正确 (requests_YYYYMMDD_HHMMSS.har)
- [ ] 使用Chrome DevTools导入HAR文件验证

### 7. CSV格式导出

- [ ] 点击"导出"按钮
- [ ] 选择"CSV格式"
- [ ] 点击"导出"
- [ ] 文件成功下载
- [ ] 使用Excel/Numbers打开验证
- [ ] 数据格式正确

---

## 🔧 过滤规则验证

### 8. 添加过滤规则

- [ ] 进入"代理抓包"页面
- [ ] 点击"过滤规则"（如果有独立页面）
- [ ] 或通过API添加规则
- [ ] 规则成功添加
- [ ] 规则列表显示新规则

**API验证**:
```bash
# 添加排除规则
curl -X POST http://localhost:8000/api/v1/filters/rules \
  -H "Content-Type: application/json" \
  -d '{
    "id": "test-rule-1",
    "name": "排除广告",
    "type": "exclude",
    "pattern": "*.ads.com",
    "enabled": true
  }'

# 获取规则列表
curl http://localhost:8000/api/v1/filters/rules
```

### 9. 规则持久化

- [ ] 添加一条测试规则
- [ ] 重启后端服务
- [ ] 规则仍然存在
- [ ] 规则正常工作

### 10. 规则更新和删除

- [ ] 更新规则内容
- [ ] 更新成功
- [ ] 删除规则
- [ ] 删除成功

---

## 🔐 证书管理验证

### 11. 证书状态检查

- [ ] 进入"证书管理"标签页
- [ ] 证书状态显示正确
- [ ] 证书路径显示
- [ ] Windows安装状态显示（如果是Windows）

### 12. 证书过期检查

- [ ] 过期时间显示
- [ ] 剩余天数显示
- [ ] 过期状态正确（有效/即将过期/已过期）
- [ ] 如果即将过期，显示警告提示

### 13. 证书下载

- [ ] 点击"下载证书文件"按钮
- [ ] 证书文件成功下载
- [ ] 文件名为 `mitmproxy-ca-cert.pem`

### 14. Windows证书安装（仅Windows）

- [ ] 点击"Windows 安装证书"按钮
- [ ] 提示需要管理员权限（如果需要）
- [ ] 安装成功提示
- [ ] 证书状态更新为"已安装"

### 15. 证书重新生成

- [ ] 点击"重新生成证书"按钮
- [ ] 确认对话框显示
- [ ] 点击确认
- [ ] 证书重新生成成功
- [ ] 提示需要重启代理服务

---

## 🎯 Native Hook验证（Windows）

### 16. 进程列表

- [ ] 进入"Native Hook"页面
- [ ] 进程列表显示
- [ ] 可以搜索进程
- [ ] 进程信息完整（PID、名称）

### 17. 进程附加

- [ ] 选择一个进程
- [ ] 点击"附加"按钮
- [ ] 附加成功提示
- [ ] 状态显示"已附加"

### 18. 脚本注入

- [ ] 选择或编写Hook脚本
- [ ] 点击"注入脚本"按钮
- [ ] 脚本注入成功
- [ ] Hook记录开始显示

### 19. 脚本模板

- [ ] 模板列表显示
- [ ] 可以选择模板
- [ ] 模板内容正确加载
- [ ] 可以基于模板编辑

---

## 📱 移动端配置验证

### 20. 移动端配置向导

- [ ] 进入"移动端配置"标签页
- [ ] 二维码显示
- [ ] 配置说明显示
- [ ] iOS安装步骤完整
- [ ] Android安装步骤完整

### 21. 移动端证书下载

- [ ] 使用移动设备扫描二维码
- [ ] 或访问显示的URL
- [ ] 证书下载页面显示
- [ ] 可以下载证书文件

---

## 🧪 测试套件验证

### 22. 运行单元测试

```bash
cd backend
python -m pytest tests/test_filters.py -v
```

- [ ] 所有测试通过
- [ ] 无错误或警告

### 23. 运行API测试

```bash
python -m pytest tests/test_proxy_api.py -v
```

- [ ] 所有测试通过
- [ ] API响应正常

### 24. 运行集成测试

```bash
python -m pytest tests/test_integration.py -v -s
```

- [ ] 所有测试通过
- [ ] 工作流程正常

### 25. 一键测试脚本

```bash
scripts\run_tests.bat
```

- [ ] 脚本正常运行
- [ ] 所有测试通过
- [ ] 显示成功消息

---

## 📊 性能验证

### 26. API响应时间

- [ ] 健康检查 < 100ms
- [ ] 获取状态 < 100ms
- [ ] 获取请求列表 < 500ms
- [ ] 导出数据 < 3s（1000条记录）

**验证方法**:
```bash
# 使用curl测试响应时间
curl -w "@curl-format.txt" -o /dev/null -s http://localhost:8000/health
```

### 27. WebSocket延迟

- [ ] 消息推送延迟 < 100ms
- [ ] 心跳响应正常
- [ ] 无消息丢失

### 28. 并发处理

- [ ] 同时处理多个请求
- [ ] 无崩溃或错误
- [ ] 响应时间稳定

---

## 🔒 安全验证

### 29. 数据安全

- [ ] 敏感数据不在日志中显示
- [ ] 证书文件权限正确
- [ ] 数据库文件权限正确

### 30. API安全

- [ ] 无SQL注入漏洞
- [ ] 无XSS漏洞
- [ ] 错误信息不泄露敏感信息

---

## 📚 文档验证

### 31. 用户文档

- [ ] README.md 完整
- [ ] USER_GUIDE.md 可访问
- [ ] DEPLOYMENT_GUIDE.md 准确
- [ ] 所有链接有效

### 32. 开发文档

- [ ] API.md 完整
- [ ] NATIVE_HOOK_SCRIPT_GUIDE.md 详细
- [ ] TASK_COMPLETION_SUMMARY.md 准确
- [ ] FEATURES_COMPLETED.md 最新

### 33. API文档

- [ ] Swagger UI可访问 (http://localhost:8000/docs)
- [ ] 所有端点有文档
- [ ] 示例请求/响应正确
- [ ] 可以直接测试API

---

## ✅ 验证总结

### 完成统计

- 总验证项: 33
- 已完成: ___
- 失败: ___
- 跳过: ___

### 问题记录

| 序号 | 问题描述 | 严重程度 | 状态 |
|------|---------|---------|------|
| 1    |         |         |      |
| 2    |         |         |      |

### 验证结论

- [ ] ✅ 所有功能正常，可以发布
- [ ] ⚠️ 有轻微问题，需要修复后发布
- [ ] ❌ 有严重问题，不能发布

### 验证人员

- 验证人: ___________
- 验证日期: ___________
- 签名: ___________

---

## 🔄 持续验证

建议在以下情况重新执行验证：

1. 代码更新后
2. 依赖升级后
3. 配置变更后
4. 发布新版本前
5. 用户报告问题后

---

*文档维护: 开发团队*
*最后更新: 2026-01-21*
