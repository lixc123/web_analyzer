# 多平台网络请求录制功能使用指南

## 功能概述

多平台网络请求录制系统支持捕获来自 Windows 桌面应用、iOS 移动设备和 Android 移动设备的 HTTP/HTTPS 网络请求。

**核心功能：**
- HTTP/HTTPS 代理服务器
- 自动 HTTPS 证书管理
- 多设备同时连接
- 实时请求监控
- 请求过滤和统计

## Windows 桌面应用录制指南

### 1. 启动代理服务

1. 打开"代理抓包"页面
2. 配置代理端口（默认 8080）
3. 勾选"启用系统代理"（自动配置 Windows 系统代理）
4. 点击"启动代理"按钮

### 2. 安装 CA 证书（首次使用）

**自动安装（推荐）：**
1. 切换到"证书管理"标签
2. 点击"安装证书到 Windows"按钮
3. 在弹出的确认对话框中点击"是"

**手动安装：**
1. 下载证书文件（.cer 格式）
2. 双击证书文件
3. 选择"安装证书" → "本地计算机" → "受信任的根证书颁发机构"
4. 完成安装

### 3. 开始录制

启动代理后，所有系统网络请求将自动被捕获。在请求列表中可以看到实时的请求数据。

### 4. 停止录制

点击"停止代理"按钮，系统代理设置将自动恢复。

## iOS 移动端录制指南

### 1. 确保设备在同一网络

iOS 设备和运行代理服务的电脑必须连接到同一个 WiFi 网络。

### 2. 配置代理

1. 打开 iOS 设置 → WiFi
2. 点击已连接的 WiFi 右侧的 (i) 图标
3. 滚动到底部，点击"配置代理"
4. 选择"手动"
5. 输入服务器 IP 和端口（在"移动端配置"标签中查看）
6. 点击"存储"

### 3. 安装证书

**方式一：扫描二维码**
1. 在"移动端配置"标签中扫描二维码
2. Safari 会自动打开证书下载页面
3. 点击"允许"下载配置描述文件

**方式二：手动访问**
1. 在 Safari 中访问显示的证书下载地址
2. 下载配置描述文件

**安装步骤：**
1. 打开设置 → 通用 → VPN 与设备管理
2. 点击下载的描述文件
3. 点击"安装"并输入密码
4. 前往设置 → 通用 → 关于本机 → 证书信任设置
5. 启用对该证书的完全信任

### 4. 验证连接

在 Safari 中访问任意 HTTPS 网站，如果能正常访问且请求出现在列表中，说明配置成功。

## Android 移动端录制指南

### 1. 配置代理

1. 打开设置 → WLAN
2. 长按已连接的 WiFi 网络
3. 选择"修改网络"或"网络详情"
4. 展开"高级选项"
5. 代理选择"手动"
6. 输入服务器 IP 和端口
7. 保存设置

### 2. 安装证书

**下载证书：**
1. 扫描"移动端配置"中的二维码，或
2. 在浏览器中访问显示的证书下载地址
3. 下载 .cer 证书文件

**安装证书：**
1. 打开设置 → 安全 → 加密与凭据
2. 点击"从存储设备安装"或"安装证书"
3. 选择"CA 证书"
4. 找到并选择下载的证书文件
5. 输入锁屏密码确认安装

**Android 7.0+ 额外步骤：**
部分应用可能需要在 AndroidManifest.xml 中配置信任用户证书。

### 3. 验证连接

打开浏览器访问 HTTPS 网站，检查请求是否出现在列表中。

## 常见问题解答

### Q: 代理无法启动，提示端口被占用？
A: 更换其他端口（如 8081、8082），或关闭占用该端口的其他程序。

### Q: HTTPS 请求显示为乱码或无法捕获？
A: 确保已正确安装并信任 CA 证书。

### Q: 移动端无法连接到代理？
A:
1. 检查设备是否在同一网络
2. 检查防火墙是否允许代理端口
3. 确认输入的 IP 和端口正确

### Q: iOS 提示"无法验证服务器身份"？
A: 确保已在"证书信任设置"中启用对证书的完全信任。

### Q: 部分应用的请求无法捕获？
A: 某些应用使用了证书固定（Certificate Pinning）技术，无法通过代理捕获。

### Q: 如何过滤特定域名的请求？
A: 在"过滤规则"中添加黑名单或白名单规则。

### Q: 如何导出捕获的请求数据？
A: 在请求列表中选择请求，使用导出功能保存为 HAR 或 JSON 格式。
